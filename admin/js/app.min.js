function alertify(status, text, url = undefined){
    
    if(status=='success'){ var icon = '<i class="fa fa-check"></i>'; }
    if(status=='error'){ var icon =  '<i class="fa fa-times"></i>'; }
    if(status=='warning'){ var icon =  '<i class="fa fa-exclamation"></i>'; }

    $('body').append('<div class="alertify '+status+'">'+icon+text+'</div>');


    setTimeout  (function(){ 
        $('.alertify').remove();  

        if(url!='none'){
           url==undefined || url=='refresh'? location.reload() : window.location.href = url;
        }
    }, 2000);   

}







function _cache(){
    if(confirm('Are you sure you want to clear the cache?')){
        $.post('_ajax/_ajaxCache.php', { frm : 'cache' }, function( data ) {
            alertify('success', 'Successfully cleared!')
        });
    }
}




function _delete(table, value){
    if(confirm('Are you sure you want to delete?')){
        $.post('_ajax/_ajaxDelete.php', { table : table, value : value }, function( data ) {
            location.reload();
        });
    }
}




$(document).ready(function () {

    $('table[id]').each(function(){ 
       
        var table = $(this).attr('id');
        var where = $(this).data('where') != undefined ? $(this).data('where') : '1=1';
        $(this).DataTable( {   
            'ajax': {
                'url': '_ajax/list.php?'+table+'&where='+where,
                'dataSrc': 'list'
            },
            "pageLength": 50,
            "fixedHeader": false,
            "columnDefs": [
                { targets: 'no-sort', orderable: false }
            ],

        "language": { "url": "js/Turkish.json"  }
            

           
        }); 
    });



$('.toggle a').click(function () {    
    if($('.sidebar').hasClass('active')){
        $('.sidebar').removeClass('active');
    }else{
        $('.sidebar').addClass('active');
    }
});



  

$('form:not(.not)').ajaxForm({
     dataType:  'json', 
    beforeSerialize: function(form, options) {
        var button_text = form.find('button[type=submit]').text();
        form.find('.btn').prop('disabled',true);
        form.find('button[type=submit]').html('<i class="far fa-spin fa-spinner fa-fw"></i>' + button_text);
        for (instance in CKEDITOR.instances) CKEDITOR.instances[instance].updateElement();
    },
    success: function(responseText, statusText, xhr, form) { 
        
         var data = responseText;
        alertify(data.status, data.description, data.url, data.time);  
        form.find('button[type=submit]').removeAttr('disabled').find('.far').remove();


    }
});









  

        
});